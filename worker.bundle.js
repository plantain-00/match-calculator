!function(e){var n={};function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=0)}([function(e,n,r){"use strict";r.r(n);function t(e,n,r,t){return new(r||(r=Promise))(function(o,u){function i(e){try{c(t.next(e))}catch(e){u(e)}}function a(e){try{c(t.throw(e))}catch(e){u(e)}}function c(e){e.done?o(e.value):new r(function(n){n(e.value)}).then(i,a)}c((t=t.apply(e,n||[])).next())})}function o(e,n){var r,t,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,t&&(o=2&u[0]?t.return:u[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,u[1])).done)return o;switch(t=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,t=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(e,i)}catch(e){u=[6,e],t=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}}function u(e){var n="function"==typeof Symbol&&e[Symbol.iterator],r=0;return n?n.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}var i=!1;function a(e,n){return t(this,void 0,void 0,function(){var r,t,a,c,f,l,s,h,d,p;return o(this,function(v){switch(v.label){case 0:a=e.matches.reduce(function(e,n){return e*n.possibilities.length},1),c=Date.now(),f=function(r){var t,f,l,s,h,d,p,v,b,y,m,g;return o(this,function(o){switch(o.label){case 0:return i?r%1e5!=0?[3,2]:[4,new Promise(function(e){return setTimeout(e,0)})]:[2,{value:void 0}];case 1:o.sent(),r>0?(l=function(e){var n=Math.round(Math.abs(e)/1e3);if(n<45)return"in a few seconds";var r=Math.round(n/60);if(r<=1)return"in 1 minute";if(r<60)return"in "+r+" minutes";var t=Math.round(r/60);if(t<=1)return"in 1 hour";if(t<24)return"in "+t+" hours";var o=Math.round(t/24);if(o<=1)return"in 1 day";if(o<30)return"in "+o+" days";var u=Math.round(o/30);if(u<=1)return"in 1 month";if(u<12)return"in "+u+" months";var i=Math.round(o/365);if(i<=1)return"in 1 year";return"in "+i+" years"}((Date.now()-c)*a/r),s={type:"progress",progress:r+" / "+a+", will be done "+l},postMessage(s,void 0)):(s={type:"progress",progress:r+" / "+a},postMessage(s,void 0)),o.label=2;case 2:h=e.teams.map(function(e){return{name:e,score:0}}),d=r,p=function(e){var n=e.possibilities[d%e.possibilities.length];0!==n.a&&(h.find(function(n){return n.name===e.a}).score+=n.a),0!==n.b&&(h.find(function(n){return n.name===e.b}).score+=n.b),d=Math.round(d/e.possibilities.length)};try{for(v=u(e.matches),b=v.next();!b.done;b=v.next())y=b.value,p(y)}catch(e){t={error:e}}finally{try{b&&!b.done&&(f=v.return)&&f.call(v)}finally{if(t)throw t.error}}for(h.sort(function(e,n){return n.score-e.score}),m=function(r){for(var t=e.tops[r],o=h[t-1].score,u=h.findIndex(function(e){return e.score===o}),i=h.filter(function(e){return e.score===o}).length,a=function(e){if(h[e].score===o)n.find(function(n){return n.name===h[e].name}).chances[r]+=(t-u)/i;else{if(!(e<t))return"break";n.find(function(n){return n.name===h[e].name}).chances[r]++}},c=0;c<h.length;c++){if("break"===a(c))break}},g=0;g<e.tops.length;g++)m(g);return[2]}})},l=0,v.label=1;case 1:return l<a?[5,f(l)]:[3,4];case 2:if("object"==typeof(s=v.sent()))return[2,s.value];v.label=3;case 3:return l++,[3,1];case 4:try{for(h=u(n),d=h.next();!d.done;d=h.next())(p=d.value).chances=p.chances.map(function(e){return Math.round(100*e/a)})}catch(e){r={error:e}}finally{try{d&&!d.done&&(t=h.return)&&t.call(h)}finally{if(r)throw r.error}}return n.sort(function(e,n){for(var r=0;r<e.chances.length;r++){if(n.chances[r]>e.chances[r])return 1;if(n.chances[r]<e.chances[r])return-1}return n.score>e.score?1:n.score<e.score?-1:n.matchCountLeft-e.matchCountLeft}),[2]}})})}onmessage=function(e){return t(void 0,void 0,void 0,function(){var n,r,t,c,f,l,s,h,d;return o(this,function(o){switch(o.label){case 0:i=!i,t=e.data,c=[],f=function(e){var n=e.teams.map(function(n){return{name:n,chances:e.tops.map(function(){return 0}),score:0,matchCountLeft:0}});!function(e,n){var r,t,o=function(e){if(1===e.possibilities.length){var r=e.possibilities[0];0!==r.a&&(n.find(function(n){return n.name===e.a}).score+=r.a),0!==r.b&&(n.find(function(n){return n.name===e.b}).score+=r.b)}else if(e.possibilities.length>1){var t=n.find(function(n){return n.name===e.a});t.matchCountLeft++,t.score+=e.possibilities.reduce(function(e,n){return Math.min(n.a,e)},1/0);var o=n.find(function(n){return n.name===e.b});o.matchCountLeft++,o.score+=e.possibilities.reduce(function(e,n){return Math.min(n.b,e)},1/0)}};try{for(var i=u(e.matches),a=i.next();!a.done;a=i.next())o(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}n.sort(function(e,n){return n.score>e.score?1:n.score<e.score?-1:n.matchCountLeft-e.matchCountLeft})}(e,n),c.push({tops:e.tops,chances:n})};try{for(l=u(t),s=l.next();!s.done;s=l.next())h=s.value,f(h)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}postMessage({type:"initial-result",result:c},void 0),d=0,o.label=1;case 1:return d<t.length?[4,a(t[d],c[d].chances)]:[3,4];case 2:o.sent(),o.label=3;case 3:return d++,[3,1];case 4:return postMessage({type:"final-result",result:c},void 0),i=!1,[2]}})})}}]);